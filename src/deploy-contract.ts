import { ContractInterface, ethers } from 'ethers';
import * as dotenv from 'dotenv';
import * as abi from './abi.json';

(async function() {
  dotenv.config();
  // eslint-disable-next-line
  const bytecode = '608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610a80806100606000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806304c4d13814610051578063087c928b14610082578063a1545ef5146100b2578063cdb3fd43146100d0575b600080fd5b61006b60048036038101906100669190610648565b6100ec565b604051610079929190610732565b60405180910390f35b61009c6004803603810190610097919061078e565b6101ae565b6040516100a991906107bb565b60405180910390f35b6100ba61025a565b6040516100c791906108e9565b60405180910390f35b6100ea60048036038101906100e5919061090b565b610333565b005b60018180516020810182018051848252602083016020850120818352809550505050505060009150905080600001549080600101805461012b906109c5565b80601f0160208091040260200160405190810160405280929190818152602001828054610157906109c5565b80156101a45780601f10610179576101008083540402835291602001916101a4565b820191906000526020600020905b81548152906001019060200180831161018757829003601f168201915b5050505050905082565b600281815481106101be57600080fd5b9060005260206000200160009150905080546101d9906109c5565b80601f0160208091040260200160405190810160405280929190818152602001828054610205906109c5565b80156102525780601f1061022757610100808354040283529160200191610252565b820191906000526020600020905b81548152906001019060200180831161023557829003601f168201915b505050505081565b60606002805480602002602001604051908101604052809291908181526020016000905b8282101561032a57838290600052602060002001805461029d906109c5565b80601f01602080910402602001604051908101604052809291908181526020018280546102c9906109c5565b80156103165780601f106102eb57610100808354040283529160200191610316565b820191906000526020600020905b8154815290600101906020018083116102f957829003601f168201915b50505050508152602001906001019061027e565b50505050905090565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461038b57600080fd5b610393610431565b82816000018181525050818160200181905250806001856040516103b79190610a33565b90815260200160405180910390206000820151816000015560208201518160010190805190602001906103eb92919061044b565b5090505060028490806001815401808255809150506001900390600052602060002001600090919091909150908051906020019061042a92919061044b565b5050505050565b604051806040016040528060008152602001606081525090565b828054610457906109c5565b90600052602060002090601f01602090048101928261047957600085556104c0565b82601f1061049257805160ff19168380011785556104c0565b828001600101855582156104c0579182015b828111156104bf5782518255916020019190600101906104a4565b5b5090506104cd91906104d1565b5090565b5b808211156104ea5760008160009055506001016104d2565b5090565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6105558261050c565b810181811067ffffffffffffffff821117156105745761057361051d565b5b80604052505050565b60006105876104ee565b9050610593828261054c565b919050565b600067ffffffffffffffff8211156105b3576105b261051d565b5b6105bc8261050c565b9050602081019050919050565b82818337600083830152505050565b60006105eb6105e684610598565b61057d565b90508281526020810184848401111561060757610606610507565b5b6106128482856105c9565b509392505050565b600082601f83011261062f5761062e610502565b5b813561063f8482602086016105d8565b91505092915050565b60006020828403121561065e5761065d6104f8565b5b600082013567ffffffffffffffff81111561067c5761067b6104fd565b5b6106888482850161061a565b91505092915050565b6000819050919050565b6106a481610691565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b838110156106e45780820151818401526020810190506106c9565b838111156106f3576000848401525b50505050565b6000610704826106aa565b61070e81856106b5565b935061071e8185602086016106c6565b6107278161050c565b840191505092915050565b6000604082019050610747600083018561069b565b818103602083015261075981846106f9565b90509392505050565b61076b81610691565b811461077657600080fd5b50565b60008135905061078881610762565b92915050565b6000602082840312156107a4576107a36104f8565b5b60006107b284828501610779565b91505092915050565b600060208201905081810360008301526107d581846106f9565b905092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600082825260208201905092915050565b6000610825826106aa565b61082f8185610809565b935061083f8185602086016106c6565b6108488161050c565b840191505092915050565b600061085f838361081a565b905092915050565b6000602082019050919050565b600061087f826107dd565b61088981856107e8565b93508360208202850161089b856107f9565b8060005b858110156108d757848403895281516108b88582610853565b94506108c383610867565b925060208a0199505060018101905061089f565b50829750879550505050505092915050565b600060208201905081810360008301526109038184610874565b905092915050565b600080600060608486031215610924576109236104f8565b5b600084013567ffffffffffffffff811115610942576109416104fd565b5b61094e8682870161061a565b935050602061095f86828701610779565b925050604084013567ffffffffffffffff8111156109805761097f6104fd565b5b61098c8682870161061a565b9150509250925092565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806109dd57607f821691505b602082108114156109f1576109f0610996565b5b50919050565b600081905092915050565b6000610a0d826106aa565b610a1781856109f7565b9350610a278185602086016106c6565b80840191505092915050565b6000610a3f8284610a02565b91508190509291505056fea2646970667358221220e64cae5a16ae20ac6a8c12cf2fc8e55431aae26d43da6207d1fd65f7fef9fe0264736f6c634300080b0033';
  const provider = ethers.getDefaultProvider(process.env.SMART_CONTRACT_NETWORK);

  const privateKey = process.env.PRIVATE_KEY;
  const wallet = new ethers.Wallet(privateKey, provider);

  const factory = new ethers.ContractFactory(abi as ContractInterface, bytecode, wallet);
  const contract = await factory.deploy();

  console.log('Contract address: ', contract.address);
  console.log('Contract deploy transaction hash: ', contract.deployTransaction.hash);

  await contract.deployed();
  console.log('Contract deployed');
})();
